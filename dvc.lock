schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: data/external/fraudTest.csv
      hash: md5
      md5: 692357a2589a1a6fcd44f14b3e1f9d2c
      size: 150354339
    - path: data/external/fraudTrain.csv
      hash: md5
      md5: 9723893e5492dc0551036edcf596e284
      size: 351238196
    - path: src/data/data_ingestion.py
      hash: md5
      md5: 054b8cd307ee05736e18c5acc3e212cc
      size: 2498
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: 0ee3c86fa2fb88e77c1a7f780fa2bd60
      size: 148954728
    - path: data/raw/train.csv
      hash: md5
      md5: 3f43d5a6aab3b5d0b5bc2676e3626496
      size: 347981313
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 0ee3c86fa2fb88e77c1a7f780fa2bd60
      size: 148954728
    - path: data/raw/train.csv
      hash: md5
      md5: 3f43d5a6aab3b5d0b5bc2676e3626496
      size: 347981313
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: ea46c52676f4be5b47922794a236a9e8
      size: 3708
    outs:
    - path: data/interim/test_cleaned.csv
      hash: md5
      md5: 452a809921a689e9ab409746ec083e24
      size: 138241923
    - path: data/interim/train_cleaned.csv
      hash: md5
      md5: 13f5d828545225b0154087ef8f136908
      size: 323018750
  feature_engineering:
    cmd: python src/features/run_feature_engineering.py
    deps:
    - path: data/interim/test_cleaned.csv
      hash: md5
      md5: 452a809921a689e9ab409746ec083e24
      size: 138241923
    - path: data/interim/train_cleaned.csv
      hash: md5
      md5: 13f5d828545225b0154087ef8f136908
      size: 323018750
    - path: src/features/feature_engineering.py
      hash: md5
      md5: 1b945954838f0b70e746ca824a88e64d
      size: 5560
    - path: src/features/run_feature_engineering.py
      hash: md5
      md5: 1eeb6172485b6a944a1a1bf32882eef9
      size: 1649
    outs:
    - path: data/processed/test_features_v2.csv
      hash: md5
      md5: a3a65116ae1b51655963901ffbb6dceb
      size: 206616273
    - path: data/processed/train_features_v2.csv
      hash: md5
      md5: a105d51eeb997d9b0169ccfcfd056df8
      size: 482517410
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/train_features_v2.csv
      hash: md5
      md5: a105d51eeb997d9b0169ccfcfd056df8
      size: 482517410
    - path: src/model/model_building.py
      hash: md5
      md5: 9cdf3b5c1516403a19fc3bdece786cbf
      size: 2894
    outs:
    - path: models/fraudguard_lightgbm
      hash: md5
      md5: ef2ddb70e53b8ca4258ed1b057b9ad90.dir
      size: 3836353
      nfiles: 3
    - path: reports/shap/shap_global_importance.csv
      hash: md5
      md5: 4b5227aa24cc948023975e7e18a34249
      size: 1106
    - path: reports/shap/shap_summary.png
      hash: md5
      md5: 4810e518cb10bd3e125f7add733526e4
      size: 119299
    - path: reports/shap/shap_summary_bar.png
      hash: md5
      md5: 79a7d96c40f71954e598ac4dce4189cb
      size: 45728
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/processed/test_features_v2.csv
      hash: md5
      md5: a3a65116ae1b51655963901ffbb6dceb
      size: 206616273
    - path: models/fraudguard_lightgbm
      hash: md5
      md5: ef2ddb70e53b8ca4258ed1b057b9ad90.dir
      size: 3836353
      nfiles: 3
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 9325a074b94658eb10c000918aa0d626
      size: 2204
    outs:
    - path: reports/evaluation/metrics.json
      hash: md5
      md5: 90bad21f88474db7c0f73c01506957a4
      size: 70
    - path: run_information.json
      hash: md5
      md5: 76264d4de5752795a5b643c109d04131
      size: 155
  model_registry:
    cmd: python src/model/model_registry.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 76264d4de5752795a5b643c109d04131
      size: 155
    - path: src/model/model_registry.py
      hash: md5
      md5: a215f7a9c2d220ab611aebe1bd1b909d
      size: 775
